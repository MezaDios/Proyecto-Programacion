<app-navbar></app-navbar>

<div class="col-12 text-center">
  <div class="card shadow">
    <form class="card-body" [formGroup]="form" (ngSubmit)="form.valid && addCharge()">
      <div class="card-header mb-2">
        <h1>Add charge</h1>
      </div>
      <div class="card-body">

        <div class="form-group">
          <input type="text" formControlName="concept" class="form-control" placeholder="Concept"
            [ngClass]="{'is-invalid':form.get('concept').touched && form.get('concept').invalid}" required />
        </div>
        <div class="invalid-feedback">
          <div>Concept is required</div>
        </div>

        <div class="form-group">
          <input type="number" formControlName="amount" class="form-control" placeholder="$ Amount"
            [ngClass]="{'is-invalid':form.get('amount').touched && form.get('amount').invalid}" required />
        </div>
        <div class="invalid-feedback">
          <div>Amount is required</div>
        </div>

        <p>Debtors</p>
        <div *ngFor="let debtor of debtors; let i = index">
          <div class="form-group">
            <label class="checkbox-inline">
              <input type="checkbox" [(ngModel)]="selectedUsers[i]" formControlName="user">
              User: {{ debtor.id}} -
              Name: {{ debtor.name }} -
              Telephone: {{ debtor.telephone }}
            </label>
          </div>
          <div *ngIf="form.get('user').touched && form.get('user').invalid" class="invalid-feedback">
            <div>You must have select at least one</div>
          </div>
        </div>

      </div>
      <div class="card-footer">
        <button [disabled]="!form.valid" type="submit" class="btn btn-primary">
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>